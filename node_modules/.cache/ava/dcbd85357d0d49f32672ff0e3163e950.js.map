{"version":3,"sources":["auth.test.js"],"names":["test","require","connection","errorHandler","users","auth","create","save","beforeEach","t","query","after","always","result","authenticate","not","token","length"],"mappings":";;AAAA,MAAMA,OAAOC,QAAQ,KAAR,CAAb;AACA,MAAM,EAAEC,UAAF,EAAcC,YAAd,KAA+BF,QAAQ,SAAR,CAArC;AACA,MAAMG,QAAQH,QAAQ,UAAR,EAAoB,EAACC,UAAD,EAAaC,YAAb,EAApB,CAAd;AACA,MAAME,OAAOJ,QAAQ,SAAR,EAAmB,EAACC,UAAD,EAAaC,YAAb,EAAnB,CAAb;AACA,MAAMG,SAAS,MAAMF,MAAMG,IAAN,CAAW,eAAX,EAA4B,QAA5B,CAArB;;AAEAP,KAAKQ,UAAL,CAAgBC,KAAKP,WAAWQ,KAAX,CAAiB,sBAAjB,CAArB;AACAV,KAAKW,KAAL,CAAWC,MAAX,CAAkBH,KAAKP,WAAWQ,KAAX,CAAiB,sBAAjB,CAAvB;;AAEAV,KAAK,4BAAL,EAAmC,MAAMS,CAAN,IAAW;AAC5C,QAAMH,QAAN;AACA,QAAMO,SAAS,MAAMR,KAAKS,YAAL,CAAkB,eAAlB,EAAmC,QAAnC,CAArB;AACAL,IAAEM,GAAF,CAAMF,OAAOG,KAAb,EAAoB,IAApB;AACAP,IAAEM,GAAF,CAAMF,OAAOG,KAAP,CAAaC,MAAnB,EAA2B,CAA3B;AACD,CALD","file":"auth.test.js","sourcesContent":["const test = require('ava')\r\nconst { connection, errorHandler } = require('./setup')\r\nconst users = require('../users')({connection, errorHandler})\r\nconst auth = require('../auth')({connection, errorHandler})\r\nconst create = () => users.save('user@test.com', '123456')\r\n\r\ntest.beforeEach(t => connection.query('truncate table users'))\r\ntest.after.always(t => connection.query('truncate table users'))\r\n\r\ntest('Login de usuÃ¡rio - sucesso', async t => {\r\n  await create()\r\n  const result = await auth.authenticate('user@test.com', '123456')\r\n  t.not(result.token, null)\r\n  t.not(result.token.length, 0)\r\n})\r\n"]}